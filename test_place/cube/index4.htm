<!DOCTYPE html>
<html>
<head>
<title>cube in table</title>
<style>
body { margin: 20px; overflow: auto; background-color: #eee; display: flex; justify-content: center; align-items: flex-start; min-height: 100vh; }
table { border-collapse: collapse; }
td { padding: 20px; text-align: center;} /* tdのボーダーをなくす */
.cube3{height:160px;width:160px;}
.cube-container { transform-style: preserve-3d; transform: rotateX(-30deg) rotateY(45deg);margin-top:-55px;  /* td内で中央に配置 */ }
.face-container { position: absolute; width: 130px; height: 130px; transform-style: preserve-3d; display: flex; flex-wrap: wrap; justify-content: center; align-items: center; }
.square { width: 36px; height: 36px; border: 1px solid #b5b5b5; box-sizing: border-box; margin: 3px;}


.colr{background-color:#afeeff;}

/* 各面の配置と色 */
.left { transform: translateZ(-65px) rotateY(180deg); }
.back { transform: translateX(65px) rotateY(90deg); }
.top { transform: translateY(-65px) rotateX(90deg); }
.right { transform: translateZ(65px); }
.bottom { transform: translateY(65px) rotateX(-90deg); }
.front { transform: translateX(-65px) rotateY(-90deg); }

</style>
</head>
<body>
 <table border="1">
  <tr>
   <td class="cube3"></td>
   <td>ここに文字</td>
   <td></td>
  </tr>
  <tr>
   <td class="cube3"></td>
   <td>別の文字</td>
   <td></td>
  </tr>
  <tr>
   <td class="cube3"></td>
   <td>さらに文字</td>
   <td></td>
  </tr>
 </table>

<script>

  const faceColors = {
    back: '#fff7ab',//黄
    left: '#ffdead',//オレンジ
    top: '#afeeff',//青
    right: '#ffb7b7',//赤
    front: '#ffffff',//白
    bottom: '#9ff19f'//緑
  };

  const colorData = {
    back:    [0, 0, 0, 1, 1, 1, 1, 1, 1],
    right:  [1, 1, 0, 1, 1, 0, 1, 1, 0],
    front:  [1,1, 1, 1, 1, 1, 1, 1, 1],
    bottom: [0, 1, 0, 1, 0, 1, 0, 1, 0],
    left:   [0, 0, 1, 0, 0, 1, 0, 0, 1],
    top:   [1, 1, 1, 0, 0, 0, 1, 1, 1]
  };

  function createCube() {
    const cubeContainer = document.createElement('div');
    cubeContainer.classList.add('cube-container');

    for (const face in colorData) {
      const faceContainer = document.createElement('div');
      faceContainer.classList.add('face-container', face);

      for (let i = 0; i < 9; i++) {
        const square = document.createElement('div');
        square.classList.add('square');
        faceContainer.appendChild(square);
      }

      cubeContainer.appendChild(faceContainer);
    }

    return cubeContainer;
  }

  function setColor(cube, faceName, colorArray) {
    const face = cube.querySelector(`.face-container.${faceName}`);
    const squares = face.querySelectorAll('.square');
    if (squares.length === colorArray.length) {
      for (let i = 0; i < squares.length; i++) {
        squares[i].style.backgroundColor = colorArray[i] === 0 ? '#efefef' : faceColors[faceName];
      }
    } else {
      console.error(`Color array length mismatch for ${faceName}`);
    }
  }

  const table = document.querySelector('table');
  const rows = table.rows;

  for (let i = 0; i < rows.length; i++) {
    const firstTdInRow = rows[i].cells[0]; // 各行の最初の td 要素を取得
    if (firstTdInRow) {
      const newCube = createCube();
      for (const face in colorData) {
        setColor(newCube, face, colorData[face]);
      }
      firstTdInRow.appendChild(newCube);
    }
  }
</script>

</body>
</html>